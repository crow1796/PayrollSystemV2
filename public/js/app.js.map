{"version":3,"sources":["app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["(function(window, document, $){\n    //Image URL Reader\n    var ReadImageURL = function(inputFile, outputElement){\n        var inputFile = inputFile,\n            outputElement = outputElement,\n            readImg = null,\n            result = '';\n        return {\n            init: function(fileReader){\n                if(fileReader == null){\n                    readImg = new FileReader();\n                }else{\n                    readImg = fileReader;\n                }\n                return this;\n            },\n            readImgData: function(){\n                if(inputFile.files.length > 0){\n                    readImg.readAsDataURL(inputFile.files[0]);\n                }\n                return this;\n            },\n            getResult: function(){\n                readImg.onload = function(e){\n                    outputElement.attr('src', e.target.result);\n                };\n            }\n        };\n    }\n\n    $(function(){\n\n        /**\n         * Initialize JQuery UI Datepicker and Timepicker add-on\n         */\n        $('.input-date').datepicker();\n        $('.input-time').timepicker();\n\n        /**\n         * Initialize DataTables\n         */\n        var defaultDtAttributesWithLength = function(displayLength){\n            return {\n                'info': false,\n                'length': false,\n                'responsive': true,\n                'bLengthChange': false,\n                'iDisplayLength': displayLength,\n                'oLanguage': {\n                    'oPaginate': {\n                        'sNext': '&raquo;',\n                        'sPrevious': '&laquo;'\n                    }\n                }\n            };\n        };\n\n        $('.bmpc-table-container table')\n            .DataTable(defaultDtAttributesWithLength(14));\n\n        $('.events-table-container table')\n            .DataTable(defaultDtAttributesWithLength(5));\n\n        $('.events-calendar-container .events-calendar')\n            .fullCalendar({\n                editable: false,\n                // eventLimit: true,\n                weekends: true,\n                header: {\n                    left: 'prev today',\n                    center: 'title',\n                    right: 'today next'\n                },\n                eventSources: [window.location.origin + '/api/events'],\n                eventRender: function(event, element) {\n                    var location = event.location ? event.location : 'N/A';\n                    element.popover({\n                        html: true,\n                        title: '<b>' + event.title + '</b>',\n                        placement: 'top',\n                        content:'<b>Event ID</b>: <span class=\"event-id\">' + event.id + '</span>'\n                                + '<br><b>Start</b>: ' \n                                + moment(moment(event.start).toDate()).format('MMMM DD, YYYY')\n                                + '<br><b>Location</b>: ' + location\n                                + '<hr>' + event.description\n                                + '<hr><a href=\"' + (window.location.pathname + '/' \n                                + event.id + '/edit') \n                                + '\"><span class=\"fa fa-edit\"></span> Edit</a> | '\n                                + '<a type=\"submit\" data-toggle=\"modal\"'\n                                + ' class=\"btn-link btn-md delete-event-confirmation-modal-button\"'\n                                + ' href=\"#delete-confirmation-modal\"><span class=\"fa fa-trash\">'\n                                + '</span> Delete</a>'\n                    });\n                },\n                eventAfterRender: function(event, element){\n                    element.on('click', function(){\n                        var deleteBtn = $(this).next()\n                                                .children('.popover-content')\n                                                .children('.delete-event-confirmation-modal-button');\n\n                        deleteBtn.unbind('click');\n\n                        deleteBtn.on('click', function(){\n                            var eventId = $(this).parent()\n                                                .children('.event-id')\n                                                .text();\n                            var modal = $($(this).attr('href'));\n                            var formAction = window.location.href + '/' + eventId;\n                            modal.children()\n                                .find('form')\n                                .attr('action', formAction);\n                        });\n                    });\n                }\n            });\n\n        $('.delete-employee-confirmation-modal-button')\n            .on('click', function(){\n                var employeeId = $(this).parent().parent().parent().prev().text();\n                modifyDeleteModalFormAction($(this), employeeId);\n            });\n\n        $('.delete-user-confirmation-modal-button')\n            .on('click', function(){\n                var userId = $(this).parent().parent().parent().prev().text();\n                modifyDeleteModalFormAction($(this), userId);\n            });\n\n        $('.delete-log-confirmation-modal-button')\n            .on('click', function(){\n                var logId = $(this).parent().parent().parent().prev().text();\n                modifyDeleteModalFormAction($(this), logId);\n            });\n\n        function modifyDeleteModalFormAction(target, id){\n            var modal = $(target.attr('href'));\n            var formAction = window.location.href;\n            // window.location.origin\n            // window.location.pathname\n            modal.children()\n                    .find('form')\n                    .attr('action', formAction + \"/\" + id);\n        }\n\n        $('.positive-only')\n            .on('keyup', function(){\n                if($(this).val() < 0){\n                    $(this).val(0);\n                }\n            });\n\n        /**\n         * Sidebar menu transitions\n         */\n        $('.sidebar-menu-toggle, #page-overlay').on('click', function(e){\n            e.preventDefault();\n            $('.sidebar-submenu').removeClass('sidebar-submenu-active')\n            $('#sidebar-menu-container ul li a').removeClass('active');\n\n            $('.sidebar-menu-toggle').toggleClass('sidebar-menu-toggle-active');\n            $('#page-overlay').toggleClass('page-overlay-active');\n            $($('.sidebar-menu-toggle').attr('href')).toggleClass('sidebar-menu-container-active');\n        });\n\n        /**\n         * Sidebar submenu transitions\n         */\n        $('.sidebar-submenu-toggle').on('click', function(e){\n            e.preventDefault();\n            $('.sidebar-submenu').removeClass('sidebar-submenu-active');\n            $(this).next().toggleClass('sidebar-submenu-active');\n        });\n\n        $('#sidebar-menu-container ul li a').on('click', function(){\n            // $('#sidebar-menu-container ul li a').removeClass('active');\n            // $(this).addClass('active');\n            if($(this).hasClass('active')){\n                $(this).removeClass('active');\n                return true;\n            }\n            $(this).addClass('active');\n        });\n\n        $('.panel .panel-heading').on('click', function(){\n            var panel_body = $(this).next();\n            if(panel_body.hasClass('panel-body-active')){\n                panel_body.removeClass('panel-body-active');\n                $(this).children()\n                    .find('.fa')\n                    .removeClass('fa-caret-up')\n                    .addClass('fa-caret-down');\n            }else{\n                panel_body.addClass('panel-body-active');\n                $(this).children()\n                    .find('.fa')\n                    .removeClass('fa-caret-down')\n                    .addClass('fa-caret-up');\n            }\n        });\n\n        /**\n         * Request error message transition\n         */\n        $('.alert-close-button')\n            .on('click', function(){\n                $('.request-error-container')\n                    .slideUp('fast');\n            });\n\n        $('#civil_status')\n            .on('change', function(){\n                if($(this).val().toLowerCase() != 'single'.toLowerCase()){\n                    $('.not-single-additional-info-container')\n                        .slideDown('fast');\n                    return true;\n                }\n                $('.not-single-additional-info-container')\n                    .children()\n                    .find('input')\n                    .each(function(){\n                        $(this).val('');\n                    });\n                $('.not-single-additional-info-container')\n                    .slideUp('fast');\n            });\n\n        $(window)\n            .on('scroll', function(){\n                if($(this).scrollTop() > 50){\n                    $('#back-to-top-button')\n                        .slideDown('fast');\n\n                    return true;\n                }\n\n                $('#back-to-top-button')\n                    .slideUp('fast');\n            });\n\n        $('#back-to-top-button')\n            .on('click', function(){\n                $('html, body')\n                    .animate({scrollTop: 0}, 1000, 'easeOutCirc');\n            });\n\n        /**\n         * Event All Day Checkbox\n         * @param  {element} element \n         * @return {mixed}         \n         */\n        function checkEventCheckbox(element){\n            if(element == null){\n                return false;\n            }\n            var timeInputs = [\n                $('#event_start_time'),\n                $('#event_end_time'),\n            ];\n            if(element.checked){\n                $.each(timeInputs, function(){\n                    $(this).parent()\n                            .parent()\n                            .slideUp('fast');\n                    $(this).val('00:00');\n                });\n                return true;\n            }\n            $.each(timeInputs, function(){\n                $(this).parent()\n                        .parent()\n                        .slideDown('fast');\n                $(this).val('00:00');\n            });\n        }\n\n        // Check all day checkbox on load\n        checkEventCheckbox($('[type=\"checkbox\"][name=\"all_day\"]')[0]);\n\n        $('[type=\"checkbox\"][name=\"all_day\"]')\n            .on('change', function(){\n                checkEventCheckbox($(this).context);\n            });\n        // Event All Day Checkbox\n        \n        $('#display-photo-thumbnail')\n            .on('click', function(e){\n                $('#image-input').click();\n            });\n\n        $('#image-input')\n            .on('change', function(e){\n                var source = document.getElementById('image-input');\n                var output = $('#display-photo-thumbnail');\n                var reader = new ReadImageURL(source, output)\n                                    .init()\n                                    .readImgData()\n                                    .getResult();\n            });\n\n        $('.sidebar-area-list-nav-up, .sidebar-area-event-nav-up')\n            .on('click', function(){\n                var height = $(this).next().outerHeight();\n                $(this).next()\n                        .animate({\n                            scrollTop: '-=' + height + 'px'\n                        }, 500);\n            });\n\n        $('.sidebar-area-list-nav-down, .sidebar-area-event-nav-down')\n            .on('click', function(){\n                var height = $(this).prev().outerHeight();\n                $(this).prev()\n                        .animate({\n                            scrollTop: '+=' + height + 'px'\n                        }, 500);\n            });\n\n        $('.username-control')\n            .on('focusout', function(){\n                var suggestionsContainer = $(this).next();\n                // suggestionsContainer.hide('fast');\n            })\n            .on('keyup focusin', function(){\n                var suggestionsContainer = $(this).next();\n                var suggestions = '';\n                var target = $(this);\n                var url = window.location.origin + '/api/match-employees';\n                var token = $(this).parent()\n                                    .parent().parent()\n                                    .parent().parent()\n                                    .parent().parent()\n                                    .find('[name=\"_token\"]').val();\n                var username = $(this).val();\n                var requestData = {\n                    '_token' : token,\n                    'username' : username\n                };\n\n                $.ajax({\n                    url: url,\n                    type: 'GET',\n                    data: requestData,\n                    beforeSend: function(data){\n                    },\n                    success: function(data){\n                        var containerStart = '<div title=\"Close suggestions\" '\n                                            + 'class=\"text-center username-suggesions-close\">'\n                                            + '<span class=\"fa fa-close\"></span></div>'\n                                            + '<ul class=\"nav nav-pills nav-stacked username-suggestions\">';\n                        var results = '';\n                        var containerEnd = '</ul>';\n                        var suffix = '';\n                        results += ('<li class=\"username-suggestion\">'\n                                    + '<a class=\"text-center username-suggestion-clear\"><span class=\"fa fa-eraser\"></span> Clear </a>'\n                                    + '</li>');\n                        for(var i = 0; i < data.length; i++){\n                            suffix = data[i].suffix ? data[i].suffix : '';\n                            results += ('<li class=\"username-suggestion\">'\n                                        + '<a data-employee_id=\"' + data[i].id + '\">'\n                                        + data[i].id \n                                        + '<span class=\"pull-right\">'\n                                        + data[i].first_name + ' ' + data[i].middle_name\n                                        + ' ' + data[i].last_name + ' ' + suffix\n                                        + '</span></a>'\n                                        + '</li>');\n                        }\n                        containerStart += (results + containerEnd);\n                        suggestions = containerStart;\n                    },\n                    complete: function(data){\n                        if(data.responseJSON.length <= 0){\n                            target.addClass('no-result-control');\n                            suggestionsContainer.show('fast');\n                            suggestionsContainer.html('<p class=\"text-center\">No data matched.</p>');\n                            return false;\n                        }\n                        target.removeClass('no-result-control')\n                        suggestionsContainer.html(suggestions);\n                        suggestionsContainer.show('fast', function(){\n                            rebindUsernameSuggestionEvents('click');\n                        });\n                        return true;\n                    }\n                });\n            });\n            function rebindUsernameSuggestionEvents(){\n                $('.username-suggestions-container .username-suggestions .username-suggestion a, .username-suggesions-close, .username-suggestion-clear')\n                    .unbind();\n                $('.username-suggestions-container .username-suggestions .username-suggestion')\n                    .on('click', 'a', function(e){\n                        e.preventDefault();\n                        var suggestionsContainer = $(this).parent().parent().parent();\n                        suggestionsContainer.prev().val($(this).data('employee_id'));\n                        suggestionsContainer.hide('fast');\n                    });\n                $('.username-suggestions-container')\n                    .on('click', '.username-suggesions-close', function(){\n                        suggestionsContainer = $(this).parent();\n                        suggestionsContainer.hide('fast');\n                    });\n                $('.username-suggestions-container')\n                    .on('click', '.username-suggestion-clear', function(){\n                        var suggestionsContainer = $(this).parent().parent().parent();\n                        suggestionsContainer.prev().val('');\n                        suggestionsContainer.hide('fast');\n                    })\n            }\n\n        $('.start-payroll-transact-button')\n            .on('click', function(e){\n                e.preventDefault();\n                $('.dtr-transaction-container .dtr-transaction')\n                    .removeClass('panel-body-active')\n                    .addClass('panel-body-active');\n\n                var employeeId = $(this).data('employee_id');\n                var fullname = $(this).data('fullname');\n                var position = $(this).data('position');\n                var department = $(this).data('department');\n\n                $('.transact-employee-information').hide('fast', function(){\n                    $('#transact-employee-id').text(employeeId);\n                    $('#transact-fullname').text(fullname);\n                    $('#transact-position').text(position);\n                    $('#transact-department').text(department);\n                    $('.transact-employee-information').show('fast');\n                });\n\n                $('[name=\"time_in\"],[name=\"time_out\"]').val('');\n\n                $('#regular-hours').text('0');\n                $('#undertime-hours').text('0');\n                $('#overtime-hours').text('0');\n                $('#total-hours').text('0');\n            });\n\n        $('[name=\"time_in\"], [name=\"time_out\"]')\n            .on('keyup blur', function(e){\n                var regularHours = 0;\n                var undertimeHours = 0;\n                var overtimeHours = 0;\n                var totalHours = 0;\n                var timeIn = 0;\n                var timeOut = 0;\n                var calculatedHours = 0;\n\n                timeIn = parseInt(($('[name=\"time_in\"]').val() != '') ? $('[name=\"time_in\"]').val() : 0);\n                timeOut = parseInt(($('[name=\"time_out\"]').val() != '') ? $('[name=\"time_out\"]').val() : 0);\n                calculatedHours = (timeIn > timeOut) ? ((timeOut + 2400) - timeIn) : (timeOut - timeIn);\n\n                regularHours = calculatedHours;\n                if(calculatedHours >= 800){\n                    regularHours = 800;\n                }\n\n                if(regularHours < 800){\n                    undertimeHours = 800 - regularHours;\n                }\n\n                if(calculatedHours > 900){\n                    overtimeHours = (calculatedHours - regularHours) - 100;\n                }\n\n                totalHours = (regularHours + overtimeHours);\n\n                regularHours /= 100;\n                undertimeHours /= 100;\n                overtimeHours /= 100;\n                totalHours /= 100;\n\n                $('#regular-hours').text((regularHours < 8)? 0 : regularHours);\n                $('#undertime-hours').text(undertimeHours);\n                $('#overtime-hours').text(overtimeHours);\n                $('#total-hours').text(totalHours);\n            });\n\n        $('.dtr-transaction-container .dtr-transaction form')\n            .off('submit')\n            .on('submit', function(e){\n                e.preventDefault();\n                if(e.handled !== true){\n                    e.handled = true;\n                    var baseUrl = window.location.origin;\n                    var requestData = {\n                        'time_in': $(this).children().find('[name=\"time_in\"]').val(),\n                        'time_out': $(this).children().find('[name=\"time_out\"]').val(),\n                        '_token': $(this).children('[name=\"_token\"]').val()\n                    };\n                    $.ajax({\n                        url: baseUrl + '/api/add-employee-dtr',\n                        type: 'POST',\n                        data: requestData,\n                        success: function(response){\n                            var message = '';\n                            if(response.errors === true){\n                                delete response.errors;\n                                $.each(response, function(key, value){\n                                    $.each(value, function(key2, value2){\n                                        message += ('<p class=\"text-center\">' + value2 + '</p>');\n                                    });\n                                });\n\n                                toggleModalMessageContainerWithMessage(message, 'modal-message-container-danger');\n                                return false;\n                            }\n\n                            message = ('<p class=\"text-center\">' + response + '</p>');\n                            toggleModalMessageContainerWithMessage(message, 'modal-message-container-success');\n                        }\n                    });\n                }\n                return false;\n            });\n\n        $('.multiple-file-input-container input')\n            .on('change', function(e){\n                var fileCount = $(this).context.files.length;\n                if(fileCount > 0){\n                    $(this).next()\n                            .children('.file-count')\n                            .text(fileCount + ' files selected');\n                }\n            });\n\n        function toggleModalMessageContainerWithMessage(message, subclass){\n            $('.modal-message-container .modal-message')\n                .html(message)\n                .parent()\n                .removeClass()\n                .addClass('modal-message-container')\n                .addClass(subclass)\n                .slideDown('fast', function(e){\n                    var container = $(this);\n                    window.setTimeout(function(){\n                        container.hide('fast');\n                    }, 3000);\n                });\n        }\n    });\n}(window, document, window.jQuery));"],"sourceRoot":"/source/"}